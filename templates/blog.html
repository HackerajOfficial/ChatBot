{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatBot</title>
    <link rel="stylesheet" href="{% static 'blog/style.css' %}">
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>
<body>
    <h1>ChatBot</h1>
    <div>
        <div id="chatbot">
            <p class="botText"><span style="color: red;">ChatBot: </span><span>Welcome to our service! We're delighted to have you here. To ensure we can provide you with the best experience, could you please share some information with us like Your Name, Email, Phone, and Address.</span></p>

        </div>
        <div id="userInput">
            <input type="text" id="textInput" name="userMessage"  placeholder="Type Your Message..."/>
            <input type="submit" value="Send" id="buttonInput" />
        </div>
    </div>
    <script>
        function getUserResponse(){
            var userText = $('#textInput').val();
            var userHTML = "<p class='userText'><span style='color: red;'>User:</span><span>"+userText+"</span></p>";
            $('#textInput').val("");

            $('#chatbot').append(userHTML);

            $.get('getResponse', {userMessage:userText}).done(function(data){
                var returnedMessage = "<p class='botText'><span style='color: red;'>ChatBot:</span><span>"+data+"</span></p>";
                $('#chatbot').append(returnedMessage);

            })
        }

        $('#buttonInput').click(function(){
            getUserResponse()
        })
        // Event listener for Enter key press
        $('#textInput').keypress(function(event) {
            if (event.which === 13) { // Check if Enter key was pressed
                event.preventDefault(); // Prevent default form submission
                getUserResponse(); // Call function to handle user response
            }
        });
    </script>
    
</body>
</html>